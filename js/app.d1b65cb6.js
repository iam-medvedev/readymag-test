(function(t){function e(e){for(var o,a,s=e[0],l=e[1],c=e[2],u=0,p=[];u<s.length;u++)a=s[u],i[a]&&p.push(i[a][0]),i[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);d&&d(e);while(p.length)p.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],o=!0,s=1;s<n.length;s++){var l=n[s];0!==i[l]&&(o=!1)}o&&(r.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},i={1:0},r=[];function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},a.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var d=l;r.push([8,0]),n()})({"7plj":function(t,e,n){},8:function(t,e,n){t.exports=n("Vtdi")},BAGh:function(t,e,n){},"C/VX":function(t,e,n){"use strict";var o=n("7plj"),i=n.n(o);i.a},FR87:function(t,e,n){"use strict";var o=n("YEHr"),i=n.n(o);i.a},IUDg:function(t,e,n){"use strict";var o=n("yXoE"),i=n.n(o);i.a},KN9a:function(t,e,n){},ODuQ:function(t,e,n){},S4WA:function(t,e,n){"use strict";var o=n("BAGh"),i=n.n(o);i.a},Vtdi:function(t,e,n){"use strict";n.r(e);n("VRzm");var o=n("Kw5r"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("BlockList"),t._v(" "),n("ButtonsWrapper")],1)},r=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"result"},t._l(t.blocks,function(t,e){return n("div",{key:e},[n("Block",{attrs:{index:e,type:t.type,thumbnail:t.thumbnail,url:t.url}})],1)}))},s=[],l=n("L2JU");o["a"].use(l["a"]);var c=new l["a"].Store({state:{blocks:[],isAddModalOpened:!1},mutations:{addBlock:function(t,e){t.blocks.push(e)},toggleVideoModal:function(t,e){t.isAddModalOpened=e}},actions:{addPhoto:function(t,e){var n=t.commit,o=new FileReader;o.readAsDataURL(e),o.onload=function(){n("addBlock",{type:"photo",thumbnail:o.result})}}}}),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("div",{staticClass:"block",class:{"resize-free":"video"==t.type,"resize-locked":"photo"==t.type},attrs:{id:"thumbnail-"+t.index}},[n("img",{attrs:{src:t.thumbnail,alt:""}}),t._v(" "),"video"==t.type?n("a",{attrs:{href:t.url,target:"_blank",rel:"nofollow noopener"}},[n("span",{staticClass:"icon-video"})]):t._e(),t._v(" "),n("div",{staticClass:"handle handle-nw"}),t._v(" "),n("div",{staticClass:"handle handle-ne"}),t._v(" "),n("div",{staticClass:"handle handle-sw"}),t._v(" "),n("div",{staticClass:"handle handle-se"})])])},u=[],p=n("+zpa"),h=n.n(p),f={name:"Block",props:["thumbnail","url","type","index"],mounted:function(){h()("#thumbnail-".concat(this.index)).draggable({onmove:this.dragMoveListener,restrict:{restriction:"parent",elementRect:{top:0,left:0,bottom:1,right:1}}}).resizable({preserveAspectRatio:"photo"==this.type,edges:{left:!0,right:!0,bottom:!0,top:!0},restrictEdges:{outer:"parent",endOnly:!0},restrictSize:{min:{width:100,height:100}},onend:this.resizeEndListener}).on("resizemove",this.resizeListener)},methods:{dragMoveListener:function(t){var e=t.target,n=(parseFloat(e.getAttribute("data-x"))||0)+t.dx,o=(parseFloat(e.getAttribute("data-y"))||0)+t.dy;this.setElPosition(e,n,o)},resizeListener:function(t){var e=t.target,n=parseFloat(e.getAttribute("data-x"))||0,o=parseFloat(e.getAttribute("data-y"))||0;e.style.width="".concat(t.rect.width,"px"),e.style.height="".concat(t.rect.height,"px"),n+=t.deltaRect.left,o+=t.deltaRect.top,this.setElPosition(e,n,o)},resizeEndListener:function(t){if(t.interactable.options.resize.preserveAspectRatio){var e=t.target,n=e.parentNode,o=n.getBoundingClientRect(),i=e.getBoundingClientRect(),r=e.querySelector("img"),a=r.clientWidth/r.clientHeight,s={top:i.top-o.top,right:i.right-o.right,bottom:i.bottom-o.bottom,left:i.left-o.left};if(s.top<0&&(this.setElPosition(e,s.left,0),this.resizeEndListener(t)),s.top+e.clientHeight>n.clientHeight){var l=Math.abs(n.clientHeight-(s.top+e.clientHeight));e.style.height="".concat(parseFloat(e.style.height)-l,"px"),e.style.width="".concat(parseFloat(e.style.height)*a,"px")}}},setElPosition:function(t,e,n){t.style.webkitTransform=t.style.transform="translate(".concat(e,"px, ").concat(n,"px)"),t.setAttribute("data-x",e),t.setAttribute("data-y",n)}}},m=f,v=(n("ni/3"),n("KHd+")),g=Object(v["a"])(m,d,u,!1,null,"ed4c90c8",null),b=g.exports,y={name:"BlockList",computed:{blocks:function(){return c.state.blocks}},components:{Block:b}},_=y,w=(n("C/VX"),Object(v["a"])(_,a,s,!1,null,"2f56c4f2",null)),x=w.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"buttons"},[n("AddPhotoButton"),t._v(" "),n("AddVideoButton"),t._v(" "),n("AddVideoModal")],1)},A=[],E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"image-loader"},[n("i",{staticClass:"icon-photo"}),t._v(" "),n("input",{attrs:{type:"file",name:"image",accept:"image/*"},on:{change:function(e){t.addPhoto(e.target.files)}}})])},B=[],L={name:"AddPhotoButton",methods:{addPhoto:function(t){if(t.length){var e=t[0];c.dispatch("addPhoto",e)}}}},O=L,C=(n("tYep"),Object(v["a"])(O,E,B,!1,null,"dc1e49f2",null)),M=C.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{on:{click:function(e){t.openModal()}}},[n("i",{staticClass:"icon-video"})])},P=[],V={name:"AddVideoButton",methods:{openModal:function(){return c.commit("toggleVideoModal",!0)}}},z=V,R=(n("jP26"),Object(v["a"])(z,j,P,!1,null,"b2611310",null)),F=R.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"add-video-wrapper",class:{showed:t.isAddModalOpened},on:{click:function(e){t.closeModal(e)}}},[n("div",{staticClass:"add-video-modal"},[n("form",{on:{submit:function(e){return e.preventDefault(),t.addVideo(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"}],class:{error:t.urlError},attrs:{type:"text",placeholder:"http://youtube.com/...",required:""},domProps:{value:t.url},on:{keydown:function(e){t.inputChanged()},input:function(e){e.target.composing||(t.url=e.target.value)}}}),t._v(" "),n("button",{attrs:{type:"submit",disabled:t.urlError}},[n("i",{staticClass:"icon-search"})])])])])},H=[],$=n("iv4g"),S=(n("Z2Ku"),n("L9s1"),n("SZJd")),W=n.n(S),K=(n("DGjd"),{name:"AddVideoButton",data:function(){return{url:null,urlError:null,escListener:null}},computed:{isAddModalOpened:function(){return c.state.isAddModalOpened}},mounted:function(){this.escListener=function(t){27===t.keyCode&&c.commit("toggleVideoModal",!1)},document.body.addEventListener("keyup",this.escListener)},beforeDestroy:function(){this.escListener&&document.body.removeEventListener("keyup",this.escListener)},methods:{closeModal:function(t){Object($["a"])(t.target.classList).includes("add-video-wrapper")&&c.commit("toggleVideoModal",!1)},inputChanged:function(){this.urlError=!1},addVideo:function(){var t=W.a.parse(this.url||null);t&&t.id?(c.commit("addBlock",{type:"video",thumbnail:"https://img.youtube.com/vi/".concat(t.id,"/0.jpg"),url:"https://www.youtube.com/watch?v=".concat(t.id)}),c.commit("toggleVideoModal",!1),this.url=null):this.urlError=!0}}}),J=K,N=(n("IUDg"),Object(v["a"])(J,D,H,!1,null,"28e3b213",null)),T=N.exports,U={name:"ButtonsWrapper",components:{AddPhotoButton:M,AddVideoButton:F,AddVideoModal:T}},X=U,Y=(n("FR87"),Object(v["a"])(X,k,A,!1,null,"1e4dd2e6",null)),G=Y.exports,q={name:"app",components:{BlockList:x,ButtonsWrapper:G}},I=q,Q=(n("S4WA"),Object(v["a"])(I,i,r,!1,null,null,null)),Z=Q.exports;o["a"].config.productionTip=!1,new o["a"]({el:"#app",store:c,render:function(t){return t(Z)}})},YEHr:function(t,e,n){},jP26:function(t,e,n){"use strict";var o=n("ODuQ"),i=n.n(o);i.a},"ni/3":function(t,e,n){"use strict";var o=n("KN9a"),i=n.n(o);i.a},tYep:function(t,e,n){"use strict";var o=n("zLiT"),i=n.n(o);i.a},yXoE:function(t,e,n){},zLiT:function(t,e,n){}});
//# sourceMappingURL=app.d1b65cb6.js.map